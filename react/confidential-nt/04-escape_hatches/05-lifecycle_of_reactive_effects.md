# Lifecycle of Reactive Effects

## ë“¤ì–´ê°€ë©´ì„œ

EffectëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ë‹¤ë¥¸ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§. ì»´í¬ë„ŒíŠ¸ëŠ” ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸ ë˜ëŠ” ë§ˆìš´íŠ¸ í•´ì œí•  ìˆ˜ ìˆìŒ. **EffectëŠ” ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ê³  ë‚˜ì¤‘ì— ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ëŠ” ë‘ ê°€ì§€ ì‘ì—…ë§Œ í•  ìˆ˜ ìˆìŒ.** ì´ ì‚¬ì´í´ì€ 'ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€í•˜ëŠ” propsì™€ stateì— ì˜ì¡´í•˜ëŠ”' Effectì˜ ê²½ìš° ì—¬ëŸ¬ ë²ˆ ë°œìƒí•  ìˆ˜ ìˆìŒ. ReactëŠ” Effectì˜ ì˜ì¡´ì„±ì„ ì˜¬ë°”ë¥´ê²Œ ì§€ì •í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¦°í„° ê·œì¹™ì„ ì œê³µ. ì´ë ‡ê²Œ í•˜ë©´ Effectê°€ ìµœì‹  propsì™€ stateì— ë™ê¸°í™”ë¨.

## Effectì˜ ìƒëª…ì£¼ê¸°

ëª¨ë“  React ì»´í¬ë„ŒíŠ¸ëŠ” ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê±°ì¹¨:

- ì»´í¬ë„ŒíŠ¸ëŠ” í™”ë©´ì— ì¶”ê°€ë  ë•Œ ë§ˆìš´íŠ¸ë¨.
- ì»´í¬ë„ŒíŠ¸ëŠ” ìƒˆë¡œìš´ propsë‚˜ stateë¥¼ ë°›ìœ¼ë©´ ì—…ë°ì´íŠ¸ë¨. ì´ëŠ” ë³´í†µ ìƒí˜¸ì‘ìš©ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ë°œìƒ.
- í™”ë©´ì—ì„œ ì œê±°ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë¨.

ì´ëŠ” ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ ìƒê°í•˜ëŠ” ì¢‹ì€ ë°©ë²•ì´ì§€ë§Œ Effectì— ëŒ€í•´ì„œëŠ” ì•„ë‹˜. **ëŒ€ì‹  ê° Effectë¥¼ ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ì™€ ë…ë¦½ì ìœ¼ë¡œ ìƒê°í•´ì•¼.** . EffectëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œì„ í˜„ì¬ props ë° stateì— ë™ê¸°í™”í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•¨. ì½”ë“œê°€ ë³€ê²½ë¨ì— ë”°ë¼, ì´ ë™ê¸°í™”ë¥¼ ë” ìì£¼ ë˜ëŠ” ëœ ìì£¼ ìˆ˜í–‰í•´ì•¼. (ë™ê¸°í™”ë¥¼ ì¡°ì •í•˜ëŠ” ê²Œ í•„ìš”í•  ë•Œê°€ ìˆìŒ.)

ì´ ì ì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì±„íŒ… ì„œë²„ì— ì—°ê²°í•˜ëŠ” Effectë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ì.

```js
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]);
  // ...
}
```

ë³´ë‹¤ì‹œí”¼ Effectì˜ ë³¸ë¬¸ì—ëŠ” ë™ê¸°í™” ì‹œì‘ ë°©ë²•ì´ ëª…ì‹œë˜ì–´ ìˆìŒ. ê·¸ë¦¬ê³  Effectì—ì„œ ë°˜í™˜ë˜ëŠ” í´ë¦°ì—… í•¨ìˆ˜ëŠ” ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ëŠ” ë°©ë²•ì„ ì§€ì •.

ì§ê´€ì ìœ¼ë¡œ ReactëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ê³  ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•  ê²ƒì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŒ. **í•˜ì§€ë§Œ ë•Œë¡œëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëœ ìƒíƒœì—ì„œ ë™ê¸°í™”ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹œì‘í•˜ê³  ì¤‘ì§€í•´ì•¼ í•  ìˆ˜ë„ ìˆìŒ.**

ì´ëŸ¬í•œ ë™ì‘ì´ í•„ìš”í•œ ì´ìœ ì™€ ë°œìƒ ì‹œê¸°, ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì.

- ì°¸ê³ :
  - ì¼ë¶€ EffectëŠ” í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì „í˜€ ë°˜í™˜í•˜ì§€ ì•ŠìŒ. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê³  ì‹¶ê² ì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ReactëŠ” ì•„ë¬´ ì‘ì—…ë„ í•˜ì§€ ì•ŠëŠ” ë¹ˆ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œ ê²ƒì²˜ëŸ¼ ë™ì‘í•¨.

## ë™ê¸°í™”ê°€ ë‘ ë²ˆ ì´ìƒ ìˆ˜í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì´ìœ 

ì´ ChatRoom ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©ìê°€ ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒí•œ roomId propì„ ë°›ëŠ”ë‹¤ê³  ê°€ì •í•´ ë³´ì. ì²˜ìŒì— ì‚¬ìš©ìê°€ "general" ì±„íŒ…ë°©ì„ roomIdë¡œ ì„ íƒí–ˆë‹¤ê³  ê°€ì •í•´ ë³´ì. ì•±ì— "general" ì±„íŒ…ë°©ì´ í‘œì‹œë¨.

```js
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId /* "general" */ }) {
  // ...
  return <h1>Welcome to the {roomId} room!</h1>;
}
```

UIê°€ í‘œì‹œë˜ë©´ Reactê°€ Effectë¥¼ ì‹¤í–‰í•˜ì—¬ ë™ê¸°í™”ë¥¼ ì‹œì‘. "general" ë°©ì— ì—°ê²°ë¨.

```js
function ChatRoom({ roomId /* "general" */ }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Connects to the "general" room
    connection.connect();
    return () => {
      connection.disconnect(); // Disconnects from the "general" room
    };
  }, [roomId]);
  // ...
```

ì§€ê¸ˆê¹Œì§€ëŠ” ê´œì°®.

ì´í›„, ì‚¬ìš©ìê°€ ë“œë¡­ë‹¤ìš´ì—ì„œ ë‹¤ë¥¸ ë°©ì„ ì„ íƒí•¨.(ì˜ˆ: "travel"). ë¨¼ì € Reactê°€ UIë¥¼ ì—…ë°ì´íŠ¸.

```js
function ChatRoom({ roomId /* "travel" */ }) {
  // ...
  return <h1>Welcome to the {roomId} room!</h1>;
}
```

ë‹¤ìŒì— ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ì§€ ìƒê°í•´ ë³´ì. ì‚¬ìš©ìëŠ” UIì—ì„œ "travel"ì´ ì„ íƒëœ ëŒ€í™”ë°©ì„ì„ ì•Œ ìˆ˜ ìˆìŒ. í•˜ì§€ë§Œ ì§€ë‚œë²ˆì— ì‹¤í–‰ëœ EffectëŠ” ì—¬ì „íˆ "general"ëŒ€í™”ë°©ì— ì—°ê²°ë˜ì–´ ìˆìŒ. **roomId propì´ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸ì— ì´ì „ì— Effect("general" ë°©ì— ì—°ê²°)ê°€ ìˆ˜í–‰í•œ ì‘ì—…ì´ ë” ì´ìƒ UIì™€ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ.**

ì´ ì‹œì ì—ì„œ ìš°ë¦¬ëŠ” Reactê°€ ë‘ ê°€ì§€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸°ë¥¼ ì›í•¨.

1. ì´ì „ roomIdì™€ì˜ ë™ê¸°í™” ì¤‘ì§€ ("general" ë£¸ì—ì„œ ì—°ê²° í•´ì œ)
2. ìƒˆ roomIdì™€ ë™ê¸°í™” ì‹œì‘ ("travel" ë£¸ê³¼ ì—°ê²°)

**ë‹¤í–‰íˆ ìš°ë¦¬ëŠ” ì´ë¯¸ ì´ ë‘ ê°€ì§€ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ Reactì— ê°€ë¥´ì¹¨.** Effectì˜ ë³¸ë¬¸ì€ ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ëŠ” ë°©ë²•ì„ ì§€ì •í•˜ê³ , í´ë¦°ì—… í•¨ìˆ˜ëŠ” ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ëŠ” ë°©ë²•ì„ ì§€ì •í•¨. ì´ì œ Reactê°€ í•´ì•¼ í•  ì¼ì€ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ, ì˜¬ë°”ë¥¸ propsì™€ stateë¡œ í˜¸ì¶œí•˜ê¸°ë§Œ í•˜ë©´ ë¨. ì •í™•íˆ ì–´ë–»ê²Œ ì¼ì–´ë‚˜ëŠ”ì§€ ì‚´í´ë³´ì.

## Reactê°€ Effectë¥¼ ì¬ë™ê¸°í™” í•˜ëŠ” ë°©ë²•

ChatRoomì»´í¬ë„ŒíŠ¸ì˜ roomId propì´ ìƒˆë¡œìš´ ê°’ì„ ë°›ì•˜ë‹¤ëŠ” ê²ƒì„ ê¸°ì–µ. ì´ì „ì—ëŠ” "general"ì´ì—ˆì§€ë§Œ ì´ì œëŠ” "travel". ë‹¤ë¥¸ ë°©ì— ë‹¤ì‹œ ì—°ê²°í•˜ë ¤ë©´ Reactê°€ Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•´ì•¼.

ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ê¸° ìœ„í•´, ReactëŠ” "general" ë°©ì— ì—°ê²°í•œ í›„ Effectê°€ ë°˜í™˜í•œ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨. roomIdê°€ "general"ì´ë¯€ë¡œ, í´ë¦°ì—… í•¨ìˆ˜ëŠ” "general" ë°©ì—ì„œ ì—°ê²°ì„ ëŠìŒ.

```js
function ChatRoom({ roomId /* "general" */ }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Connects to the "general" room
    connection.connect();
    return () => {
      connection.disconnect(); // Disconnects from the "general" room
    };
    // ...
```

ê·¸ëŸ¬ë©´ ReactëŠ” **ì´ ë Œë”ë§ ì¤‘ì— ìš°ë¦¬ê°€ ì œê³µí•œ Effectë¥¼ ì‹¤í–‰.** ì´ë²ˆì—ëŠ” roomIdê°€ "travel"ì´ë¯€ë¡œ (í´ë¦°ì—… í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì „ê¹Œì§€) "travel"ì±„íŒ…ë°©ê³¼ ë™ê¸°í™”ë˜ê¸° ì‹œì‘í•¨.

```js
function ChatRoom({ roomId /* "travel" */ }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Connects to the "travel" room
    connection.connect();
    // ...

```

ë•ë¶„ì— ì´ì œ ì‚¬ìš©ìê°€ UIì—ì„œ ì„ íƒí•œ ë°©ê³¼ ë™ì¼í•œ ë°©ì— ì—°ê²°ë¨.

ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ë¥¸ roomIdë¡œ ë‹¤ì‹œ ë Œë”ë§í•  ë•Œë§ˆë‹¤ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë¨. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ roomIdë¥¼ "travel"ì—ì„œ "music"ìœ¼ë¡œ ë³€ê²½í•œë‹¤ê³  ê°€ì •.. ReactëŠ” ë‹¤ì‹œ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ Effect ë™ê¸°í™”ë¥¼ ì¤‘ì§€("travel" ë°©ì—ì„œ ì—°ê²°ì„ ëŠìŠµë‹ˆë‹¤). ê·¸ëŸ° ë‹¤ìŒ ìƒˆ roomId propìœ¼ë¡œ ë³¸ë¬¸ì„ ì‹¤í–‰í•˜ì—¬ ë‹¤ì‹œ ë™ê¸°í™”ë¥¼ ì‹œì‘("music" ë°©ì— ì—°ê²°).

ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ë©´ ChatRoomì´ ë§ˆìš´íŠ¸ í•´ì œë¨. ì´ì œ ì—°ê²° ìƒíƒœë¥¼ ìœ ì§€í•  í•„ìš”ê°€ ì „í˜€ ì—†ìŒ. ReactëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ Effectì˜ ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ê³  "music" ì±„íŒ…ë°©ì—ì„œ ì—°ê²°ì„ ëŠìŒ.

## Effectì˜ ê´€ì ì—ì„œ ìƒê°í•˜ê¸°

ChatRoom ì»´í¬ë„ŒíŠ¸ì˜ ê´€ì ì—ì„œ ì¼ì–´ë‚œ ëª¨ë“  ì¼ì„ ìš”ì•½.

1. roomIdê°€ "general"ë¡œ ì„¤ì •ëœ ìƒíƒœë¡œ ChatRoomì´ ë§ˆìš´íŠ¸ë¨
1. roomIdê°€ "travel"ë¡œ ì„¤ì •ëœ ìƒíƒœë¡œ ChatRoomì´ ì—…ë°ì´íŠ¸ë¨
1. roomIdê°€ "music"ë¡œ ì„¤ì •ëœ ìƒíƒœë¡œ ChatRoomì´ ì—…ë°ì´íŠ¸ë¨
1. ChatRoom ë§ˆìš´íŠ¸ í•´ì œë¨

ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°ì˜ ê° ì‹œì ì—ì„œ EffectëŠ” ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì„ ìˆ˜í–‰.

1. Effectê°€ "general" ë°©ì— ì—°ê²°ë¨
1. Effectê°€ "general" ë°©ê³¼ì˜ ì—°ê²°ì´ ëŠì–´ì§€ê³  "travel" ë°©ì— ì—°ê²°ë¨
1. Effectê°€ "travel" ë°©ê³¼ì˜ ì—°ê²°ì´ ëŠì–´ì§€ê³  "music" ë°©ì— ì—°ê²°ë¨
1. Effectê°€ "music" ë°©ê³¼ì˜ ì—°ê²°ì´ ëŠì–´ì§

ì´ì œ Effect ìì²´ì˜ ê´€ì ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ìƒê°í•´ ë³´ì.

```js
useEffect(() => {
  // Your Effect connected to the room specified with roomId...
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => {
    // ...until it disconnected
    connection.disconnect();
  };
}, [roomId]);
```

ì´ ì½”ë“œì˜ êµ¬ì¡°ëŠ” ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ê²¹ì¹˜ì§€ ì•ŠëŠ” ê¸°ê°„ì˜ ì—°ì†ìœ¼ë¡œ ë³´ëŠ” ë° ì˜ê°ì„ ì¤„ ìˆ˜ ìˆìŒ.

1. Effectê°€ "general" ë°©ì— ì—°ê²°ë¨ (ì—°ê²°ì´ ëŠì–´ì§ˆ ë•Œê¹Œì§€)
1. Effectê°€ "travel" ë°©ì— ì—°ê²°ë¨ (ì—°ê²°ì´ ëŠì–´ì§ˆ ë•Œê¹Œì§€)
1. Effectê°€ "music" ë°©ì— ì—°ê²°ë¨ (ì—°ê²°ì´ ëŠì–´ì§ˆ ë•Œê¹Œì§€)

ì´ì „ì—ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ê´€ì ì—ì„œ ìƒê°í–ˆìŒ. **ì»´í¬ë„ŒíŠ¸ì˜ ê´€ì ì—ì„œ ë³´ë©´ Effectë¥¼ â€œë Œë”ë§ í›„â€ ë˜ëŠ” â€œë§ˆìš´íŠ¸ í•´ì œ ì „â€ê³¼ ê°™ì€ íŠ¹ì • ì‹œì ì— ì‹¤í–‰ë˜ëŠ” â€œì½œë°±â€ ë˜ëŠ” â€œìƒëª…ì£¼ê¸° ì´ë²¤íŠ¸â€ë¡œ ìƒê°í•˜ê¸° ì‰¬ì› ìŒ. ì´ëŸ¬í•œ ì‚¬ê³  ë°©ì‹ì€ ë§¤ìš° ë¹ ë¥´ê²Œ ë³µì¡í•´ì§€ë¯€ë¡œ í”¼í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ë‹¤.**

**ëŒ€ì‹  í•­ìƒ í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‹œì‘/ì¤‘ì§€ ì‚¬ì´í´ì—ë§Œ ì§‘ì¤‘. ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸ ë˜ëŠ” ë§ˆìš´íŠ¸ í•´ì œí•˜ëŠ” ê²ƒì€ ì¤‘ìš”í•˜ì§€ ì•ŠìŒ. ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ëŠ” ë°©ë²•ê³¼ ì¤‘ì§€í•˜ëŠ” ë°©ë²•ë§Œ ì„¤ëª…í•˜ë©´ ë¨. ì´ ì‘ì—…ì„ ì˜ ìˆ˜í–‰í•˜ë©´ í•„ìš”í•œ íšŸìˆ˜ë§Œí¼ Effectë¥¼ ì‹œì‘í•˜ê³  ì¤‘ì§€í•  ìˆ˜ ìˆëŠ” íƒ„ë ¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŒ.**

**JSXë¥¼ ìƒì„±í•˜ëŠ” ë Œë”ë§ ë¡œì§ì„ ì‘ì„±í•  ë•Œ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ëŠ”ì§€ ì—…ë°ì´íŠ¸ë˜ëŠ”ì§€ ìƒê°í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë– ì˜¬ë¦¬ë©´ ì´í•´ê°€ ì‰¬ìš¸ ê²ƒ.** í™”ë©´ì— ë¬´ì—‡ì´ í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì„¤ëª…í•˜ë©´ ë‚˜ë¨¸ì§€ëŠ” Reactê°€ ì•Œì•„ì„œ ì²˜ë¦¬í•¨.

Effectë¥¼ ì‘ì„±í•  ë•Œ, ê·¸ëƒ¥ ë™ê¸°í™” ì‹œ ìˆ˜í–‰í•  ì‘ì—… - ë™ê¸°í™” ì¤‘ì§€ ì‹œ ìˆ˜í–‰í•  ì‘ì—…ë§Œ ìƒê°í•˜ë¼ëŠ” ì˜ë¯¸ì¸ë“¯.

## Reactê°€ Effectì˜ ì¬ë™ê¸°í™” ê°€ëŠ¥ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•

ë‹¤ìŒì€ ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ì˜ˆì œ. â€œOpen chatâ€ì„ ëˆŒëŸ¬ ChatRoom ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸ í•´ë³´ë¼.

```js
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);
  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState("general");
  const [show, setShow] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <button onClick={() => setShow(!show)}>
        {show ? "Close chat" : "Open chat"}
      </button>
      {show && <hr />}
      {show && <ChatRoom roomId={roomId} />}
    </>
  );
}
```

ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë  ë•Œ 3ê°œì˜ ë¡œê·¸ê°€ í‘œì‹œë¨.

1. âœ… Connecting to "general" room at https://localhost:1234... (development-only)
1. âŒ Disconnected from "general" room at https://localhost:1234. (development-only)
1. âœ… Connecting to "general" room at https://localhost:1234...

ì²˜ìŒ ë‘ ê°œì˜ ë¡œê·¸ëŠ” ê°œë°œ ëª¨ë“œ ì „ìš©. ê°œë°œ ëª¨ë“œì—ì„œ ReactëŠ” í•­ìƒ ê° ì»´í¬ë„ŒíŠ¸ë¥¼ í•œ ë²ˆì”© ë‹¤ì‹œ ë§ˆìš´íŠ¸.

**ê°œë°œ ëª¨ë“œì—ì„œ ReactëŠ” ì¦‰ì‹œ ê°•ì œë¡œ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ì—¬ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•¨.** ë„ì–´ë½ì´ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë¬¸ì„ ì—´ì—ˆë‹¤ê°€ í•œ ë²ˆ ë” ë‹«ëŠ” ê²ƒê³¼ ë¹„ìŠ·. ReactëŠ” ê°œë°œ ì¤‘ì— Effectë¥¼ í•œ ë²ˆ ë” ì‹œì‘í•˜ê³  ì¤‘ì§€í•˜ì—¬ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì˜ êµ¬í˜„í–ˆëŠ”ì§€ í™•ì¸í•¨. -> ë™ê¸°í™” í–ˆë‹¤ê°€ ì¤‘ì§€í•˜ê³  ë‹¤ì‹œ ë™ê¸°í™”í•˜ëŠ” ê³¼ì •ì´ ì •ìƒì ìœ¼ë¡œ ì˜ ì´ë£¨ì–´ì§€ëƒ...

ì‹¤ì œë¡œ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë˜ëŠ” ì£¼ëœ ì´ìœ ëŠ” Effectê°€ ì‚¬ìš©í•˜ëŠ” ì¼ë¶€ ë°ì´í„°ê°€ ë³€ê²½ëœ ê²½ìš°ì„. ìœ„ì˜ ì˜ˆì œì—ì„œë„ roomIdê°€ ë³€ê²½ë˜ë©´ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ.

ê·¸ëŸ¬ë‚˜ ì¬ë™ê¸°í™”ê°€ í•„ìš”í•œ ë” íŠ¹ì´í•œ ê²½ìš°ë„ ìˆìŒ. ì˜ˆë¥¼ ë“¤ì–´, ì±„íŒ…ì´ ì—´ë ¤ ìˆëŠ” ìƒíƒœì—ì„œ ìœ„ì˜ ìƒŒë“œë°•ìŠ¤ì—ì„œ serverUrlì„ í¸ì§‘í•´ ë³´ë¼. ì½”ë“œ í¸ì§‘ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ Effectê°€ ì–´ë–»ê²Œ ë‹¤ì‹œ ë™ê¸°í™”ë˜ëŠ”ì§€ ì£¼ëª©í•˜ë¼. ì•ìœ¼ë¡œ ReactëŠ” ì¬ë™ê¸°í™”ì— ì˜ì¡´í•˜ëŠ” ë” ë§ì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ.

## Reactê°€ Effectì˜ ì¬ë™ê¸°í™” í•„ìš”ì„±ì„ ì¸ì‹í•˜ëŠ” ë°©ë²•

roomIdê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ Reactê°€ Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì•Œì•˜ëŠ”ì§€ ê¶ê¸ˆí•  ê²ƒ. ê·¸ ì´ìœ ëŠ” ì˜ì¡´ì„± ëª©ë¡ì— roomIdë¥¼ í¬í•¨ì‹œí‚´ìœ¼ë¡œì¨ ì½”ë“œê°€ roomIdì— ì˜ì¡´í•˜ê³  ìˆìŒì„ Reactì— ì•Œë ¸ê¸° ë•Œë¬¸.

```js
function ChatRoom({ roomId }) { // The roomId prop may change over time
                                // roomId propì€ ì‹œê°„ì— ë”°ë¼ ë°”ë€” ìˆ˜ ìˆìŒ
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // This Effect reads roomId
                                                            // ì´ EffectëŠ” roomIdë¥¼ ì½ìŒ
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]); // So you tell React that this Effect "depends on" roomId
                // ì´ Effectê°€ roomIdì— ì˜ì¡´í•¨ì„ Reactì— ì•Œë¦¼.
  // ...
```

ì‘ë™ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŒ.

1. ë‹¹ì‹ ì€ roomIdëŠ” propì´ë¯€ë¡œ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆìŒ.
1. ë‹¹ì‹ ì€ Effectê°€ roomIdë¥¼ ì½ëŠ”ë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ìŒ. (ë”°ë¼ì„œ í•´ë‹¹ ë¡œì§ì€ ë‚˜ì¤‘ì— ë³€ê²½ë  ìˆ˜ ìˆëŠ” ê°’ì— ì˜ì¡´í•¨).
1. ë‹¹ì‹ ì€ ì´ ë•Œë¬¸ì— Effectì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í•¨(roomIdê°€ ë³€ê²½ë  ë•Œ ë‹¤ì‹œ ë™ê¸°í™”ë˜ë„ë¡).

ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ReactëŠ” ì‚¬ìš©ìê°€ ì „ë‹¬í•œ ì˜ì¡´ì„± ë°°ì—´ì„ ì‚´í´ë´„. ë°°ì—´ì˜ ê°’ ì¤‘ í•˜ë‚˜ë¼ë„ ì´ì „ ë Œë”ë§ ì¤‘ì— ì „ë‹¬í•œ ë™ì¼í•œ ì§€ì ì˜ ê°’ê³¼ ë‹¤ë¥´ë©´ ReactëŠ” Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”.

ì˜ˆë¥¼ ë“¤ì–´, ì´ˆê¸° ë Œë”ë§ ì¤‘ì— ["general"]ì„ ì „ë‹¬í–ˆê³  ë‚˜ì¤‘ì— ë‹¤ìŒ ë Œë”ë§ ì¤‘ì— ["travel"]ì„ ì „ë‹¬í•œ ê²½ìš°, ReactëŠ” "general"ê³¼ "travel"ì„ ë¹„êµ. ì´ ê°’ì€ (Object.isì™€ ë¹„êµí–ˆì„ ë•Œ) ë‹¤ë¥¸ ê°’ì´ê¸° ë•Œë¬¸ì— ReactëŠ” Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•  ê²ƒ. ë°˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë  ë•Œ roomIdê°€ ë³€ê²½ë˜ì–´ìˆì§€ ì•Šì€ ê²½ìš° EffectëŠ” ë™ì¼í•œ ë°©ì— ì—°ê²°ëœ ìƒíƒœë¡œ ìœ ì§€ë¨.

## ê°ê°ì˜ EffectëŠ” ë³„ë„ì˜ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ì´ ë¡œì§ì€ ì´ë¯¸ ì‘ì„±í•œ Effectì™€ ë™ì‹œì— ì‹¤í–‰ë˜ì–´ì•¼ í•˜ë¯€ë¡œ **ê´€ë ¨ ì—†ëŠ” ë¡œì§ì„ Effectì— ì¶”ê°€í•˜ì§€ ë§ ê²ƒ.** ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ chat roomì„ ë°©ë¬¸í•  ë•Œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ì „ì†¡í•˜ê³  ì‹¶ë‹¤ê³  ê°€ì •í•´ ë³´ì. ì´ë¯¸ roomIdì— ì˜ì¡´í•˜ëŠ” Effectê°€ ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ê·¸ Effectì—ì„œ ë¶„ì„ ì´ë²¤íŠ¸ í˜¸ì¶œì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆìŒ.

```js
function ChatRoom({ roomId }) {
  useEffect(() => {
    logVisit(roomId);
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]);
  // ...
}
```

í•˜ì§€ë§Œ ë‚˜ì¤‘ì— ì´ Effectì— ì—°ê²°ì„ ë‹¤ì‹œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ë‹¤ë¥¸ ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤ê³  ê°€ì •. ì´ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë˜ë©´ ì˜ë„í•˜ì§€ ì•Šì€ ë™ì¼í•œ ë°©ì— ëŒ€í•´ logVisit(roomId)ë„ í˜¸ì¶œí•˜ê²Œ ë¨. **ë°©ë¬¸ì„ ê¸°ë¡í•˜ëŠ” ê²ƒì€ ì—°ê²°ê³¼ëŠ” ë³„ê°œì˜ í”„ë¡œì„¸ìŠ¤.** ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë‘ ê°œì˜ ê°œë³„ Effectë¡œ ì‘ì„±í•´ì•¼ í•¨.

```js
function ChatRoom({ roomId }) {
  useEffect(() => {
    logVisit(roomId);
  }, [roomId]);

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    // ...
  }, [roomId]);
  // ...
```

**ì½”ë“œì˜ ê° EffectëŠ” ë³„ë„ì˜ ë…ë¦½ì ì¸ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ì•¼**

ìœ„ì˜ ì˜ˆì‹œì—ì„œëŠ” í•œ Effectë¥¼ ì‚­ì œí•´ë„ ë‹¤ë¥¸ Effectì˜ ë¡œì§ì´ ê¹¨ì§€ì§€ ì•ŠìŒ. ì´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ê²ƒì„ ë™ê¸°í™”í•˜ë¯€ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ í•©ë¦¬ì ì´ë¼ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ„. ë°˜ë©´ ì¼ê´€ëœ ë¡œì§ì„ ë³„ë„ì˜ Effectë¡œ ë¶„ë¦¬í•˜ë©´ ì½”ë“œê°€ â€œë” ê¹”ë”í•´â€ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ ìœ ì§€ ê´€ë¦¬ê°€ ë” ì–´ë ¤ì›Œì§. **ë”°ë¼ì„œ ë¶„ë¦¬í• ë•ŒëŠ” ì½”ë“œê°€ ë” ê¹”ë”í•´ ë³´ì´ëŠ”ì§€ ì—¬ë¶€ê°€ ì•„ë‹ˆë¼ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì¼í•œì§€ ë˜ëŠ” ë¶„ë¦¬ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ê³ ë ¤í•´ì•¼ í•¨.**

## EffectëŠ” â€˜ë°˜ì‘í˜•(Reactive) ê°’â€™ì— ë°˜ì‘í•©ë‹ˆë‹¤

ë‹¤ìŒ ì½”ë“œì—ì„œ EffectëŠ” ë‘ ê°œì˜ ë³€ìˆ˜(serverUrl ë° roomId)ë¥¼ ì½ì§€ë§Œ, ì˜ì¡´ì„±ì—ëŠ” ì˜¤ì§ roomIdë§Œ ì§€ì •.

```js
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]);
  // ...
}
```

serverUrlì„ ì˜ì¡´ì„±ì— ì§€ì •í•  í•„ìš”ê°€ ì—†ëŠ” ì´ìœ ê°€ ë¬´ì—‡ì¼ê¹Œ?

**ì´ëŠ” ë¦¬ë Œë”ë§ìœ¼ë¡œ ì¸í•´ serverUrl ì´ ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸.** ì»´í¬ë„ŒíŠ¸ê°€ ì–´ë–¤ ì´ìœ ë¡œ ëª‡ ë²ˆì´ë‚˜ ë‹¤ì‹œ ë Œë”ë§í•˜ë“  í•­ìƒ ë™ì¼í•¨. serverUrl ì€ ì ˆëŒ€ ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì€ ì˜ë¯¸ê°€ ì—†ìŒ. ê²°êµ­, ì˜ì¡´ì„±ì€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë  ë•Œë§Œ ë¬´ì–¸ê°€ë¥¼ ìˆ˜í–‰í•¨.

ë°˜ë©´ roomIdëŠ” ë‹¤ì‹œ ë Œë”ë§í•  ë•Œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ. **ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì„ ì–¸ëœ props, state ë° ê¸°íƒ€ ê°’ì€ ë Œë”ë§ ì¤‘ì— ê³„ì‚°ë˜ê³  React ë°ì´í„° íë¦„ì— ì°¸ì—¬í•˜ê¸° ë•Œë¬¸ì— ë°˜ì‘í˜•.**

ë§Œì•½ serverUrlì´ state ë³€ìˆ˜ë¼ë©´, ë°˜ì‘í˜•ì¼ ê²ƒ. ë°˜ì‘í˜• ê°’ì€ ì˜ì¡´ì„±ì— í¬í•¨ë˜ì–´ì•¼ í•¨.

serverUrlì„ ì˜ì¡´ì„±ìœ¼ë¡œ í¬í•¨í•˜ë©´ serverUrlê°€ ë³€ê²½ëœ í›„ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë˜ë„ë¡ í•  ìˆ˜ ìˆìŒ.

ì˜ˆì‹œ)

```js
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);

  return (
    <>
      <label>
        Server URL:{" "}
        <input
          value={serverUrl}
          onChange={(e) => setServerUrl(e.target.value)}
        />
      </label>
      <h1>Welcome to the {roomId} room!</h1>
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState("general");
  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

roomId ë˜ëŠ” serverUrlê³¼ ê°™ì€ ë°˜ì‘í˜• ê°’ì„ ë³€ê²½í•  ë•Œë§ˆë‹¤ Effectê°€ ì±„íŒ… ì„œë²„ì— ë‹¤ì‹œ ì—°ê²°ë¨.

## ë¹ˆ ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆëŠ” Effectì˜ ì˜ë¯¸

serverUrlê³¼ roomIdë¥¼ ëª¨ë‘ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë¡œ ì´ë™í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

```js
const serverUrl = "https://localhost:1234";
const roomId = "general";

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []); // âœ… All dependencies declared
  // ...
}
```

ì´ì œ Effectì˜ ì½”ë“œëŠ” ë°˜ì‘í˜• ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ì¡´ì„±ì´ ë¹„ì–´ ìˆì„ ìˆ˜ ìˆìŒ.

ì»´í¬ë„ŒíŠ¸ì˜ ê´€ì ì—ì„œ ìƒê°í•´ë³´ë©´, ë¹ˆ [] ì˜ì¡´ì„± ë°°ì—´ì€ ì´ Effectê°€ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì±„íŒ…ë°©ì— ì—°ê²°ë˜ê³  ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë  ë•Œë§Œ ì—°ê²°ì´ ëŠì–´ì§„ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸. (ReactëŠ” ê°œë°œ ëª¨ë“œì—ì„œ ë¡œì§ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ í•œ ë²ˆ ë” ë™ê¸°í™”í•œë‹¤ëŠ” ì ì„ ê¸°ì–µ).

**í•˜ì§€ë§Œ Effectì˜ ê´€ì ì—ì„œ ìƒê°í•˜ë©´ ë§ˆìš´íŠ¸ ë° ë§ˆìš´íŠ¸ í•´ì œì— ëŒ€í•´ ì „í˜€ ìƒê°í•  í•„ìš”ê°€ ì—†ìŒ. ì¤‘ìš”í•œ ê²ƒì€ Effectê°€ ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ê³  ì¤‘ì§€í•˜ëŠ” ì‘ì—…ì„ ì§€ì •í•œ ê²ƒ. í˜„ì¬ëŠ” ë°˜ì‘í˜• ì˜ì¡´ì„±ì´ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‚¬ìš©ìê°€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ roomId ë˜ëŠ” serverUrlì„ ë³€ê²½í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´(ê·¸ë˜ì„œ ë°˜ì‘í˜•ì´ì–´ì•¼ í•œë‹¤ë©´) Effectì˜ ì½”ë“œëŠ” ë³€ê²½ë˜ì§€ ì•ŠìŒ. ì˜ì¡´ì„±ì— ì¶”ê°€í•˜ê¸°ë§Œ í•˜ë©´ ë¨.**

## ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì—ì„œ ì„ ì–¸ëœ ëª¨ë“  ë³€ìˆ˜ëŠ” ë°˜ì‘í˜•ì…ë‹ˆë‹¤

propsì™€ stateë§Œ ë°˜ì‘í˜• ê°’ì¸ ê²ƒì€ ì•„ë‹˜. ì´ë“¤ë¡œë¶€í„° ê³„ì‚°í•˜ëŠ” ê°’ë“¤ ì—­ì‹œ ë°˜ì‘í˜•. propsë‚˜ stateê°€ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ê³  ê·¸ë¡œë¶€í„° ê³„ì‚°ëœ ê°’ë„ ë³€ê²½ë¨. ê·¸ë ‡ê¸° ë•Œë¬¸ì— Effectê°€ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì˜ ëª¨ë“  ë³€ìˆ˜ëŠ” Effect ì˜ì¡´ì„± ëª©ë¡ì— ìˆì–´ì•¼ í•¨.

ì‚¬ìš©ìê°€ ë“œë¡­ë‹¤ìš´ì—ì„œ ì±„íŒ… ì„œë²„ë¥¼ ì„ íƒí•  ìˆ˜ë„ ìˆê³ , ì„¤ì •ì—ì„œ ê¸°ë³¸ ì„œë²„ë¥¼ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤ê³  ê°€ì •í•´ ë³´ì. ì´ë¯¸ settings stateë¥¼ contextì— ë„£ì–´ì„œ í•´ë‹¹ contextì—ì„œ ì½ì—ˆë‹¤ê³  ê°€ì •í•´ ë³´ì. ì´ì œ propsì—ì„œ ì„ íƒí•œ ì„œë²„ì™€ contextì—ì„œ ê¸°ë³¸ ì„œë²„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ serverUrlì„ ê³„ì‚°í•¨.

```js
function ChatRoom({ roomId, selectedServerUrl }) {
  // roomId is reactive
  const settings = useContext(SettingsContext); // settings is reactive
  const serverUrl = selectedServerUrl ?? settings.defaultServerUrl; // serverUrl is reactive
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Your Effect reads roomId and serverUrl
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId, serverUrl]); // So it needs to re-synchronize when either of them changes!
  // ...
}
```

ì´ ì˜ˆì œì—ì„œ serverUrlì€ propì´ë‚˜ state ë³€ìˆ˜ê°€ ì•„ë‹˜. ë Œë”ë§ ì¤‘ì— ê³„ì‚°í•˜ëŠ” ì¼ë°˜ ë³€ìˆ˜. í•˜ì§€ë§Œ ë Œë”ë§ ì¤‘ì— ê³„ì‚°ë˜ë¯€ë¡œ ë¦¬ë Œë”ë§ìœ¼ë¡œ ì¸í•´ ë³€ê²½ë  ìˆ˜ ìˆìŒ. ë”°ë¼ì„œ serverUrlì€ ë°˜ì‘í˜• ë³€ìˆ˜.

**ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ëª¨ë“  ê°’(ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì˜ props, state, ë³€ìˆ˜ í¬í•¨)ì€ ë°˜ì‘í˜•.** ëª¨ë“  ë°˜ì‘í˜• ê°’ì€ ë‹¤ì‹œ ë Œë”ë§í•  ë•Œ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°˜ì‘í˜• ê°’ì„ Effectì˜ ì˜ì¡´ì„±ìœ¼ë¡œ í¬í•¨ì‹œì¼œì•¼ í•¨.

ì¦‰, EffectëŠ” ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì˜ ëª¨ë“  ê°’ì— â€œë°˜ì‘â€í•¨.

- ì°¸ê³ : ì „ì—­ ë˜ëŠ” ë³€ì´ ê°€ëŠ¥í•œ ê°’ì´ ì˜ì¡´ì„±ì´ ë  ìˆ˜ ìˆë‚˜ìš”?
  - ë³€ì´ ê°€ëŠ¥í•œ ê°’(ì „ì—­ ë³€ìˆ˜ í¬í•¨, íŠ¹íˆ ì™¸ë¶€ì— ìˆëŠ” ê°’ë“¤..)ì€ not reactiveí•˜ë‹¤.
  - location.pathnameê³¼ ê°™ì€ ë³€ì´ ê°€ëŠ¥í•œ ê°’ì€ ì˜ì¡´ì„±ì´ ë  ìˆ˜ ì—†ìŒ. ì´ ê°’ì€ ë³€ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ React ë Œë”ë§ ë°ì´í„° íë¦„ ì™¸ë¶€ì—ì„œ ì–¸ì œë“ ì§€ ë°”ë€” ìˆ˜ ìˆìŒ. ì´ ê°’ì„ ë³€ê²½í•´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ ì•ŠìŒ.
  - ë”°ë¼ì„œ ì´ë¥¼ ì˜ì¡´ì„±ì— ì§€ì •í•˜ë”ë¼ë„ ReactëŠ” ì´ ê°’ì´ ë³€ê²½ë  ë•Œ Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìŒ.
  - ë˜í•œ ë Œë”ë§ ë„ì¤‘(ì˜ì¡´ì„±ì„ ê³„ì‚°í•  ë•Œ) ë³€ê²½ ê°€ëŠ¥í•œ ë°ì´í„°ë¥¼ ì½ëŠ” ê²ƒì€ ë Œë”ë§ì˜ ìˆœìˆ˜ì„±ì„ ê¹¨ëœ¨ë¦¬ê¸° ë•Œë¬¸ì— Reactì˜ ê·œì¹™ì„ ìœ„ë°˜í•¨.
  - ëŒ€ì‹ , useSyncExternalStoreë¥¼ ì‚¬ìš©í•˜ì—¬ ì™¸ë¶€ì˜ ë³€ê²½ ê°€ëŠ¥í•œ ê°’ì„ ì½ê³  êµ¬ë…í•´ì•¼ í•¨.
  - ref.currentì™€ ê°™ì´ ë³€ì´ ê°€ëŠ¥í•œ ê°’ ë˜ëŠ” ì´ ê°’ìœ¼ë¡œë¶€í„° ì½ì€ ê²ƒ ì—­ì‹œ ì˜ì¡´ì„±ì´ ë  ìˆ˜ ì—†ìŒ.
  - useRefê°€ ë°˜í™˜í•˜ëŠ” ref ê°ì²´ ìì²´ëŠ” ì˜ì¡´ì„±ì´ ë  ìˆ˜ ìˆì§€ë§Œ, current í”„ë¡œí¼í‹°ëŠ” ì˜ë„ì ìœ¼ë¡œ ë³€ì´ ê°€ëŠ¥í•¨. ì´ë¥¼ í†µí•´ ë¦¬ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ ì•Šê³ ë„ ë¬´ì–¸ê°€ë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŒ.
  - í•˜ì§€ë§Œ ì´ë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ë¦¬ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ëŠ” ì•Šê¸° ë•Œë¬¸ì—, ì´ëŠ” ë°˜ì‘í˜• ê°’ì´ ì•„ë‹ˆë©°, ReactëŠ” ì´ ê°’ì´ ë³€ê²½ë  ë•Œ Effectë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í• ì§€ ì•Œ ìˆ˜ ì—†ìŒ.
  - ì´ í˜ì´ì§€ ì•„ë˜ì—ì„œ ë°°ìš°ê²Œ ë˜ê² ì§€ë§Œ, ë¦°í„°ëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ìë™ìœ¼ë¡œ í™•ì¸í•´ ì¤Œ.

## ReactëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì„ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í–ˆëŠ”ì§€ ê²€í† í•©ë‹ˆë‹¤

ë¦°í„°ê°€ Reactì— ë§ê²Œ êµ¬ì„±ëœ ê²½ìš°, Effect ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì´ í•´ë‹¹ ì˜ì¡´ì„±ìœ¼ë¡œ ì„ ì–¸ë˜ì—ˆëŠ”ì§€ í™•ì¸í•¨. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ ì½”ë“œëŠ” roomId ë‚˜ serverUrlê°€ ëª¨ë‘ ë°˜ì‘í˜•ì´ë¯€ë¡œ ë¦°íŠ¸ ì˜¤ë¥˜.

```js
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

function ChatRoom({ roomId }) {
  // roomId is reactive
  const [serverUrl, setServerUrl] = useState("https://localhost:1234"); // serverUrl is reactive

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // <-- Something's wrong here!

  return (
    <>
      <label>
        Server URL:{" "}
        <input
          value={serverUrl}
          onChange={(e) => setServerUrl(e.target.value)}
        />
      </label>
      <h1>Welcome to the {roomId} room!</h1>
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState("general");
  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

ì´ê²ƒì€ React ì˜¤ë¥˜ì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ ì‹¤ì œë¡œëŠ” ì½”ë“œì˜ ë²„ê·¸ë¥¼ ì§€ì í•˜ëŠ” ê²ƒ. roomIdì™€ serverUrlì€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆì§€ë§Œ, ë³€ê²½ ì‹œ Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•˜ëŠ” ê²ƒì„ ìŠì–´ë²„ë¦¬ê³  ìˆìŒ. ê²°ê³¼ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ UIì—ì„œ ë‹¤ë¥¸ ê°’ì„ ì„ íƒí•œ í›„ì—ë„ ì´ˆê¸° roomId ì™€ serverUrlì— ì—°ê²°ëœ ìƒíƒœë¡œ ìœ ì§€ë¨.

ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ë¦°í„°ì˜ ì œì•ˆì— ë”°ë¼ Effectì˜ ì˜ì¡´ì„± ìš”ì†Œë¡œ roomId ë° serverUrlì„ ì§€ì •í•˜ë©´ ë¨.

- ì°¸ê³ : ì–´ë–¤ ê²½ìš°ì—ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ê°’ì´ ì„ ì–¸ë˜ë”ë¼ë„ ì ˆëŒ€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ Reactê°€ ì•Œê³  ìˆìŒ. ì˜ˆë¥¼ ë“¤ì–´, useStateì—ì„œ ë°˜í™˜ëœ ì„¤ì •ì í•¨ìˆ˜ì™€ useRefì—ì„œ ë°˜í™˜ëœ ref ê°ì²´ëŠ” ë¦¬ë Œë”ë§ ì‹œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ë³´ì¥ë˜ëŠ” ì•ˆì •ì ì¸ ê°’. ì•ˆì •ì ì¸ ê°’ì€ ë°˜ì‘í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¦°í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ëª©ë¡ì—ì„œ ìƒëµí•  ìˆ˜ ìˆìŒ. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ê°’ì„ í¬í•¨í•˜ëŠ” ê²ƒì€ í—ˆìš©ë¨. ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìƒê´€ì—†ìŒ.

## ì¬ë™ê¸°í™”ë¥¼ ì›ì¹˜ ì•ŠëŠ” ê²½ìš°ì—” ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?

ì´ì „ ì˜ˆì œì—ì„œëŠ” roomIdì™€ serverUrl ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ë‚˜ì—´í•˜ì—¬ ë¦°íŠ¸ ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•¨.

ê·¸ëŸ¬ë‚˜ ëŒ€ì‹  ì´ëŸ¬í•œ ê°’ì´ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹ˆë¼ëŠ” ê²ƒ, ì¦‰,ë¦¬ë Œë”ë§ì˜ ê²°ê³¼ë¡œ ë³€ê²½ë  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ë¦°í„°ì— â€œì¦ëª…â€í•  ìˆ˜ ìˆìŒ. ì˜ˆë¥¼ ë“¤ì–´, serverUrlê³¼ roomIdê°€ ë Œë”ë§ì— ì˜ì¡´í•˜ì§€ ì•Šê³  í•­ìƒ ê°™ì€ ê°’ì„ ê°–ëŠ”ë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆìŒ. ì´ì œ ì˜ì¡´ì„±ì´ ë  í•„ìš”ê°€ ì—†ìŒ.

**ë˜í•œ Effect ë‚´ë¶€ë¡œ ì´ë™í•  ìˆ˜ë„ ìˆìŒ. ë Œë”ë§ ì¤‘ì— ê³„ì‚°ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë°˜ì‘í•˜ì§€ ì•ŠìŒ**

```js
function ChatRoom() {
  useEffect(() => {
    const serverUrl = "https://localhost:1234"; // serverUrl is not reactive
    const roomId = "general"; // roomId is not reactive
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []); // âœ… All dependencies declared
  // ...
}
```

EffectëŠ” ë°˜ì‘í˜• ì½”ë“œ ë¸”ë¡. ë‚´ë¶€ì—ì„œ ì½ì€ ê°’ì´ ë³€ê²½ë˜ë©´ ë‹¤ì‹œ ë™ê¸°í™”ë¨. ìƒí˜¸ì‘ìš©ë‹¹ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë‹¬ë¦¬ EffectëŠ” ë™ê¸°í™”ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë¨.

ì˜ì¡´ì„±ì„ â€œì„ íƒâ€í•  ìˆ˜ëŠ” ì—†ìŒ. ì˜ì¡´ì„±ì—ëŠ” Effectì—ì„œ ì½ì€ ëª¨ë“  ë°˜ì‘í˜• ê°’ì´ í¬í•¨ë˜ì–´ì•¼ í•¨. ë¦°í„°ê°€ ì´ë¥¼ ê°•ì œí•¨. **ë•Œë•Œë¡œ ì´ë¡œ ì¸í•´ ë¬´í•œ ë£¨í”„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ Effectê°€ ë„ˆë¬´ ìì£¼ ë‹¤ì‹œ ë™ê¸°í™”ë  ìˆ˜ ìˆìŒ. ë¦°í„°ë¥¼ ì–µì œí•˜ì—¬ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ë§ ê²ƒ. ëŒ€ì‹  ì‹œë„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŒ.**

- **Effectê°€ ë…ë¦½ì ì¸ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ì§€ í™•ì¸.** Effectê°€ ì•„ë¬´ê²ƒë„ ë™ê¸°í™”í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë¶ˆí•„ìš”í•œ ê²ƒì¼ ìˆ˜ ìˆìŒ. ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ê²ƒì„ ë™ê¸°í™”í•˜ëŠ” ê²½ìš° ë¶„í• í•˜ë¼.

- â€˜ë°˜ì‘â€™í•˜ì§€ ì•Šê³  Effectë¥¼ ì¬ë™ê¸°í™”í•˜ì§€ ì•Šìœ¼ë©´ì„œ propsë‚˜ stateì˜ ìµœì‹  ê°’ì„ ì½ìœ¼ë ¤ë©´, Effectë¥¼ ë°˜ì‘í•˜ëŠ” ë¶€ë¶„(Effectì— ìœ ì§€)ê³¼ ë°˜ì‘í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„(Effect Eventë¼ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¶œ)ìœ¼ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆìŒ. ì´ë²¤íŠ¸ì™€ Effectë¥¼ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•(ë‹¤ìŒ ì±•í„°)ì— ëŒ€í•´ ì½ì–´ë³¼ ê²ƒ.

- ê°ì²´ì™€ í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆë¼. ë Œë”ë§ ì¤‘ì— ì˜¤ë¸Œì íŠ¸ì™€ í•¨ìˆ˜ë¥¼ ìƒì„±í•œ ë‹¤ìŒ Effectì—ì„œ ì½ìœ¼ë©´ ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì˜¤ë¸Œì íŠ¸ì™€ í•¨ìˆ˜ê°€ ë‹¬ë¼ì§. ê·¸ëŸ¬ë©´ ë§¤ë²ˆ Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•´ì•¼ í•¨. Effectì—ì„œ ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ ì œê±°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì½ì–´ë³¼ ê²ƒ. (ë‹¤ë‹¤ìŒ ì±•í„°)

- ì°¸ê³ : ë¦°í„°ëŠ” ìš°ë¦¬ì˜ ì¹œêµ¬ì´ì§€ë§Œ ê·¸ í˜ì€ ì œí•œë˜ì–´ ìˆìŒ.
  - **ë¦°í„°ëŠ” ì˜ì¡´ì„±ì´ ì˜ëª»ë˜ì—ˆì„ ë•Œë§Œ ì•Œ ìˆ˜ ìˆìŒ. ê° ì‚¬ë¡€ë¥¼ í•´ê²°í•˜ëŠ” ìµœì„ ì˜ ë°©ë²•ì€ ì•Œì§€ ëª»í•¨.** ë§Œì•½ ë¦°í„°ê°€ ì˜ì¡´ì„±ì„ ì œì•ˆí•˜ì§€ë§Œ **ì´ë¥¼ ì¶”ê°€í•˜ë©´ ë£¨í”„ê°€ ë°œìƒí•œë‹¤ê³  í•´ì„œ ë¦°í„°ë¥¼ ë¬´ì‹œí•´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ëŠ” ì•„ë‹˜. í•´ë‹¹ ê°’ì´ ë°˜ì‘ì ì´ì§€ ì•Šê³  ì˜ì¡´ì„±ì´ ë  í•„ìš”ê°€ ì—†ë„ë¡ Effect ë‚´ë¶€(ë˜ëŠ” ì™¸ë¶€)ì˜ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤ëŠ” ëœ».**
  - ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì´ì™€ ê°™ì´ ë¦°í„°ë¥¼ ì–µì œí•˜ëŠ” Effectê°€ ìˆì„ ìˆ˜ ìˆìŒ. (í•˜ì§€ ë§ ê²ƒì„ ê¶Œì¥.)
    ```js
    useEffect(() => {
      // ...
      // ğŸ”´ Avoid suppressing the linter like this:
      // eslint-ignore-next-line react-hooks/exhaustive-deps
    }, []);
    ```
  - ë‹¤ìŒ í˜ì´ì§€ë“¤ì—ì„œëŠ” ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•Šê³  ì´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.
